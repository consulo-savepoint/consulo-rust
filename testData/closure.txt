Rust File
  RustUseImpl(USE)
    PsiElement(use)('use')
    PsiElement(IDENTIFIER)('std')
    PsiElement(::)('::')
    PsiElement(IDENTIFIER)('task')
    PsiElement(::)('::')
    PsiElement(IDENTIFIER)('spawn')
    PsiElement(;)(';')
  PsiComment(LINE_COMMENT)('// Takes a closure and prints its result')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      PsiElement(IDENTIFIER)('closure')
      PsiElement(()('(')
      RustLetArgsImpl(LET_ARGS)
        RustLetVariableBindImpl(LET_VARIABLE_BIND)
          PsiElement(IDENTIFIER)('f')
          PsiElement(:)(':')
          RustTypeClosureImpl(TYPE_CLOSURE)
            PsiElement(|)('|')
            RustPrototypeArgsImpl(PROTOTYPE_ARGS)
              <empty list>
            PsiElement(|)('|')
            PsiElement(->)('->')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('int')
      PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprMacroImpl(EXPR_MACRO)
        PsiElement(IDENTIFIER)('println')
        PsiElement(!)('!')
        PsiElement(()('(')
        RustMacroBodyImpl(MACRO_BODY)
          PsiElement(STRING_LIT)('"{}"')
          PsiElement(,)(',')
          PsiElement(IDENTIFIER)('f')
          PsiElement(()('(')
          RustMacroBodyImpl(MACRO_BODY)
            <empty list>
          PsiElement())(')')
        PsiElement())(')')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes a closure and calls it')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      PsiElement(IDENTIFIER)('typed_closure')
      PsiElement(()('(')
      RustLetArgsImpl(LET_ARGS)
        RustLetVariableBindImpl(LET_VARIABLE_BIND)
          PsiElement(IDENTIFIER)('f')
          PsiElement(:)(':')
          RustTypeClosureImpl(TYPE_CLOSURE)
            PsiElement(|)('|')
            RustPrototypeArgsImpl(PROTOTYPE_ARGS)
              RustPrototypeArgImpl(PROTOTYPE_ARG)
                RustPrototypeVariableArgImpl(PROTOTYPE_VARIABLE_ARG)
                  RustTypeBasicImpl(TYPE_BASIC)
                    PsiElement(IDENTIFIER)('int')
            PsiElement(|)('|')
      PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('f')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprValueImpl(EXPR_VALUE)
            PsiElement(DEC_LIT)('42')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes a closure that takes a closure and calls it with its own closure')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      PsiElement(IDENTIFIER)('double_closure')
      PsiElement(()('(')
      RustLetArgsImpl(LET_ARGS)
        RustLetVariableBindImpl(LET_VARIABLE_BIND)
          PsiElement(IDENTIFIER)('f')
          PsiElement(:)(':')
          RustTypeClosureImpl(TYPE_CLOSURE)
            PsiElement(|)('|')
            RustPrototypeArgsImpl(PROTOTYPE_ARGS)
              RustPrototypeArgImpl(PROTOTYPE_ARG)
                RustPrototypeVariableArgImpl(PROTOTYPE_VARIABLE_ARG)
                  PsiElement(IDENTIFIER)('g')
                  PsiElement(:)(':')
                  RustTypeClosureImpl(TYPE_CLOSURE)
                    PsiElement(|)('|')
                    RustPrototypeArgsImpl(PROTOTYPE_ARGS)
                      RustPrototypeArgImpl(PROTOTYPE_ARG)
                        RustPrototypeVariableArgImpl(PROTOTYPE_VARIABLE_ARG)
                          RustTypeBasicImpl(TYPE_BASIC)
                            PsiElement(IDENTIFIER)('int')
                    PsiElement(|)('|')
            PsiElement(|)('|')
      PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('f')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            PsiElement(|)('|')
            RustLetArgsImpl(LET_ARGS)
              RustLetVariableBindImpl(LET_VARIABLE_BIND)
                PsiElement(IDENTIFIER)('x')
            PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprMacroImpl(EXPR_MACRO)
                PsiElement(IDENTIFIER)('println')
                PsiElement(!)('!')
                PsiElement(()('(')
                RustMacroBodyImpl(MACRO_BODY)
                  PsiElement(STRING_LIT)('"{}"')
                  PsiElement(,)(',')
                  PsiElement(IDENTIFIER)('x')
                  PsiElement(+)('+')
                  PsiElement(DEC_LIT)('1')
                PsiElement())(')')
        PsiElement())(')')
      PsiElement(})('}')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      RustVisibilityImpl(VISIBILITY)
        PsiElement(pub)('pub')
      PsiElement(fn)('fn')
      PsiElement(IDENTIFIER)('main')
      PsiElement(()('(')
      RustLetArgsImpl(LET_ARGS)
        <empty list>
      PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            PsiElement(|)('|')
            RustLetArgsImpl(LET_ARGS)
              <empty list>
            PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprValueImpl(EXPR_VALUE)
                PsiElement(DEC_LIT)('1')
        PsiElement())(')')
      PsiElement(;)(';')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('typed_closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            PsiElement(|)('|')
            RustLetArgsImpl(LET_ARGS)
              RustLetVariableBindImpl(LET_VARIABLE_BIND)
                PsiElement(IDENTIFIER)('a')
            PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprMacroImpl(EXPR_MACRO)
                PsiElement(IDENTIFIER)('println')
                PsiElement(!)('!')
                PsiElement(()('(')
                RustMacroBodyImpl(MACRO_BODY)
                  PsiElement(STRING_LIT)('"typed {}"')
                  PsiElement(,)(',')
                  PsiElement(IDENTIFIER)('a')
                PsiElement())(')')
        PsiElement())(')')
      PsiElement(;)(';')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('double_closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            PsiElement(|)('|')
            RustLetArgsImpl(LET_ARGS)
              RustLetVariableBindImpl(LET_VARIABLE_BIND)
                PsiElement(IDENTIFIER)('g')
                PsiElement(:)(':')
                RustTypeClosureImpl(TYPE_CLOSURE)
                  PsiElement(|)('|')
                  RustPrototypeArgsImpl(PROTOTYPE_ARGS)
                    RustPrototypeArgImpl(PROTOTYPE_ARG)
                      RustPrototypeVariableArgImpl(PROTOTYPE_VARIABLE_ARG)
                        RustTypeBasicImpl(TYPE_BASIC)
                          PsiElement(IDENTIFIER)('int')
                  PsiElement(|)('|')
            PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprCallImpl(EXPR_CALL)
                RustExprPathImpl(EXPR_PATH)
                  PsiElement(IDENTIFIER)('g')
                PsiElement(()('(')
                RustCallParamsImpl(CALL_PARAMS)
                  RustExprValueImpl(EXPR_VALUE)
                    PsiElement(DEC_LIT)('1')
                PsiElement())(')')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiComment(LINE_COMMENT)('// proc is the closure which will be spawned.')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('spawn')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprProcImpl(EXPR_PROC)
            PsiElement(proc)('proc')
            PsiElement(()('(')
            RustLetArgsImpl(LET_ARGS)
              <empty list>
            PsiElement())(')')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprBlockImpl(EXPR_BLOCK)
                RustStatementBlockImpl(STATEMENT_BLOCK)
                  PsiElement({)('{')
                  RustExprMacroImpl(EXPR_MACRO)
                    PsiElement(IDENTIFIER)('println')
                    PsiElement(!)('!')
                    PsiElement(()('(')
                    RustMacroBodyImpl(MACRO_BODY)
                      PsiElement(STRING_LIT)('"I'm a new task"')
                    PsiElement())(')')
                  PsiElement(})('}')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiElement(})('}')